<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Athlete Performance Tracker</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèÉ</text></svg>">
    
    <!-- Preconnect to CDNs for faster loading -->
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://www.gstatic.com">
    
    <!-- Inline critical CSS for instant rendering -->
    <style>
        /* Critical CSS - Loading State */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #eff6ff 0%, #e0e7ff 100%);
            min-height: 100vh;
        }
        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Load full CSS asynchronously -->
    <link rel="stylesheet" href="styles.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="styles.css"></noscript>
</head>
<body>
    <div id="root">
        <!-- Optimized loading screen -->
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; gap: 1rem;">
            <div class="loading-spinner"></div>
            <p style="color: #6b7280;">Loading PerformanceDB...</p>
        </div>
    </div>
    
    <!-- ===========================================
         OPTIMIZED SCRIPT LOADING - ONLY 6 FILES!
         =========================================== -->
    
    <!-- 1. React and ReactDOM (essential) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 2. Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- 3. Firebase Configuration -->
    <script src="firebase-config.js"></script>
    
    <!-- 4. Recharts (load synchronously from different CDN) -->
<script src="https://cdn.jsdelivr.net/npm/prop-types@15.8.1/prop-types.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/recharts@2.5.0/dist/Recharts.js"></script>
    
    <!-- 5. Icons - Inline for instant availability -->
    <script>
        window.Icons = {
            Activity: () => 'üèÉ',
            Users: () => 'üë•',
            Calendar: () => 'üìÖ',
            TrendingUp: () => 'üìà'
        };
    </script>
    
    <!-- 6. ALL SERVICES (Utils + Firebase + Analytics) -->
    <script src="services-combined.js"></script>
    
    <!-- 7. ALL COMPONENTS (All React components in one file) -->
    <script src="components.js"></script>
    
    <script>
console.log('=== Checking Dependencies ===');
console.log('React:', typeof React);
console.log('ReactDOM:', typeof ReactDOM);
console.log('Recharts:', typeof Recharts);
console.log('PropTypes:', typeof PropTypes);
if (window.Recharts) {
  console.log('Recharts components:', Object.keys(window.Recharts));
}
</script>

    <!-- 8. Main Application -->
    <script src="app.js"></script>
    
    <!-- Performance monitoring -->
    <script>
        window.addEventListener('load', function() {
            if (window.performance) {
                const perfData = window.performance.timing;
                const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
                const connectTime = perfData.responseEnd - perfData.requestStart;
                const renderTime = perfData.domComplete - perfData.domLoading;
                
                console.log('üìä Performance Metrics:');
                console.log(`  Total Load Time: ${pageLoadTime}ms`);
                console.log(`  Server Response: ${connectTime}ms`);
                console.log(`  DOM Render: ${renderTime}ms`);
            }
        });
    </script>
</body>
</html>